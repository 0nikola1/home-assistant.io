<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Testing your code - Home Assistant</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Make sure that your code passes the checks">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://home-assistant.io/developers/development_testing/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Testing your code">
    <meta property="og:site_name" content="Home Assistant">
    <meta property="og:url" content="https://home-assistant.io/developers/development_testing/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Make sure that your code passes the checks">
    <meta property="og:image" content="https://home-assistant.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Testing your code">
    <meta name="twitter:description" content="Make sure that your code passes the checks">
    <meta name="twitter:image" content="https://home-assistant.io/images/default-social.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Home Assistant" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
  <a href="/" class="site-title">
    <img width='40' src='/demo/favicon-192x192.png'>
    <span>Home Assistant</span>
  </a>
</div>

<div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-right">
  
  <li><a href='/getting-started/'>Getting started</a></li>
  <li><a href='/components/'>Components</a></li>
  <li><a href='/cookbook/'>Examples</a></li>
  <li><a href="/developers/">Developers</a></li>
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/help/">Need help?</a></li>
</ul>
  </nav>
</div>

  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="page">
  
  

  
  <header>
    <h1 class="title indent">
      Testing Your Code
    </h1>
  </header>
  <hr class="divider">
  

  <p>Home Assistant enforces strict <a href="https://www.python.org/dev/peps/pep-0008/">PEP8 style</a> compliance on all code submitted. Every Pull Request is automatically tested with <a href="https://coveralls.io/github/home-assistant/home-assistant">Coveralls</a> and <a href="https://travis-ci.org/home-assistant/home-assistant">Travis CI</a> after it is created.</p>

<h3><a class="title-link" name="local-testing" href="#local-testing"></a> Local testing</h3>

<p>It’s highly recommanded to run <code>tox</code> before you create your Pull Request to avoid annoying fixes. Local testing requires <code>tox</code> to be installed.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>$ pip3 install tox
</pre></div>
</div>
</div>

<p>Start the test of your code with <code>tox</code>.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>$ tox
</pre></div>
</div>
</div>

<p>This will run unit tests against python 3.4 and 3.5 (if both are available locally), as well as run a set of tests which validate <code>pep8</code> and <code>pylint</code> style of the code.</p>

<h4><a class="title-link" name="testing-tips" href="#testing-tips"></a> Testing Tips</h4>

<p>You can optionally run tests on only one tox target using the <code>-e</code> option to select an environment. For instance <code>tox -e lint</code> will run the linters only, <code>tox -e py34</code> will run unit tests only on python 3.4.</p>

<p>Tox uses virtual environments under the hood to create isolated testing environments. The Tox virtual environments will get out date when requirements change causing test errors. Run <code>tox -r</code> to create new Tox virtual environments.</p>

<p>During development on a specific file, it can speed up your workflow to just run tests and linting related to the file that you’re working on. To run individual files:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>$ flake8 homeassistant/core.py
$ pylint homeassistant/core.py
$ py.test tests/test_core.py
</pre></div>
</div>
</div>

<h3><a class="title-link" name="prevent-linter-errors" href="#prevent-linter-errors"></a> Prevent Linter Errors</h3>

<p>You can save yourself the hassle of extra commits just to fix style errors by enabling the flake8 git commit hook. It will check your code when you attempt to commit to the repository. It will block the commit if there are any style issues, giving you a chance to fix it.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>$ pip3 install flake8 flake8-docstrings
$ flake8 --install-hook=git
</pre></div>
</div>
</div>

<p>The flake8-docstrings extension will check docstrings according to <a href="https://www.python.org/dev/peps/pep-0257/">PEP257</a> when running flake8.</p>

<h3><a class="title-link" name="notes-on-pylint-and-pep8-validation" href="#notes-on-pylint-and-pep8-validation"></a> Notes on PyLint and PEP8 validation</h3>

<p>In case a PyLint warning cannot be avoided, add a comment to disable the PyLint check for that line. This can be done using the format <code># pylint: disable=YOUR-ERROR-NAME</code>. Example of an unavoidable PyLint warning is if you do not use the passed in datetime if you’re listening for time change.</p>



</article>


        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">
  <div class='edit-github'><a href='https://github.com/home-assistant/home-assistant.io/tree/master/source/developers/development_testing.markdown'>Edit this page on GitHub</a></div>
  <div class='section'>
    <h1 class="title delta">Development Guide</h1>
    <ul class='divided sidebar-menu'>
      <li>
        <a  href='/developers/'>Introduction </a>
        <ul>
          <li><a  href='/developers/architecture/'>Architecture </a></li>
          <li><a  href='/developers/architecture_components/'>Components </a></li>
        </ul>
      </li>
      <li>
        <a  href='/developers/development/'>Starting with Development </a>
        <ul>
          <li><a  href='/developers/development_environment/'>Setting up Environment </a></li>
          <li><a  href='/developers/development_submitting/'>Submit your Work </a></li>
          <li><a  href='/developers/development_checklist/'>Checklist </a></li>
          <li><a class='active' href='/developers/development_testing/'>Testing </a></li>
          <li><a  href='/developers/development_catching_up/'>Catching up with Reality </a></li>
        </ul>
      </li>
      <li>
        <a  href='/developers/add_new_platform/'>Support a new device (as a platform) </a>
        <ul>
          <li><a  href='/developers/platform_example_sensor/'>Example sensor platform  </a></li>
          <li><a  href='/developers/platform_example_light/'>Example light platform </a></li>
        </ul>
      </li>
      <li>
        <a  href='/developers/creating_components/'>Adding a new component </a>
        <ul>
          <li><a  href='/developers/component_loading/'>Loading components </a></li>
          <li><a  href='/developers/component_deps_and_reqs/'>Requirements & Dependencies </a></li>
          <li><a  href='/developers/component_initialization/'>Initialization </a></li>
          <li><a  href='/developers/component_events/'>Handling events </a></li>
          <li><a  href='/developers/component_states/'>States </a></li>
          <li><a  href='/developers/component_visibility/'>Visibility </a></li>
          <li><a  href='/developers/component_generic_discovery/'>Loading Platforms </a></li>
          <li><a  href='/developers/component_discovery/'>Component Discovery </a></li>
        </ul>
      </li>
      <li>
        Frontend Development
        <ul>
          <li><a  href='/developers/frontend/'>Setup Frontend Environment </a></li>
          <li><a  href='/developers/frontend_add_card/'>Add State Card </a></li>
          <li><a  href='/developers/frontend_add_more_info/'>Add More Info Dialog </a></li>
          <li><a  href='/developers/frontend_creating_custom_panels/'>Add Custom Panels </a></li>
        </ul>
      </li>
      <li>
        API
        <ul>
          <li><a  href='/developers/rest_api/'>RESTful API </a></li>
          <li><a  href='/developers/python_api/'>Python API </a></li>
          <li><a  href='/developers/server_sent_events/'>Server-sent events </a></li>
        </ul>
      </li>
      <li><a  href='/developers/helpers/'>Online helpers </a></li>
      <li><a  href='/developers/multiple_instances/'>Multiple Instances </a></li>
      <li><a  href='/developers/website/'>Home-Assistant.io </a></li>
      <li><a  href='/developers/credits/'>Credits </a></li>
    </ul>
  </div>
</section>
  
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright">
  <a rel="me" href='https://twitter.com/home_assistant'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://facebook.com/homeassistantio'><i class="icon-facebook"></i></a>
  <a rel="me" href='https://plus.google.com/110560654828510104551'><i class="icon-google-plus"></i></a>
  <a rel="me" href='https://github.com/home-assistant/home-assistant'><i class="icon-github"></i></a>

  <div class="credit">
    Contact us at <a href='mailto:hello@home-assistant.io'>hello@home-assistant.io</a>.<br>
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and the <a href='https://github.com/coogie/oscailte'>Oscalite theme</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>
</div>
    </div>
  </div>
</div>
    </footer>

    <script>
  var _gaq=[['_setAccount','UA-57927901-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
  </body>
</html>